{% extends "base.html" %}

{% block content %}
<div class="module-wrap admin-dashboard">
  <h2>ğŸ“œ Ø¯ÙØªØ± Ø«Ø¨Øª (Ledger)</h2>
  <p class="muted" style="margin: 0 0 16px;">Ù„ÛŒØ³Øª ÙˆØ±ÙˆØ¯â€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø¨Ù‡ Ø¯ÙØªØ± Ø§ÙØ²ÙˆØ¯Ù‡â€ŒØ´ÙˆÙ†Ø¯Ù‡ (append-only). Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø²Ù†Ø¬ÛŒØ±Ù‡Ù” Ù‡Ø´â€ŒÙ‡Ø§ Ùˆ payloadâ€ŒÙ‡Ø§ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª.</p>

  <div style="margin-bottom:12px"> <a class="btn" href="{{ url_for('admin_stub') }}">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª</a> </div>

  <div class="links">
    <table style="width:100%;background:#fff;border:1px solid #eee;border-radius:10px;border-collapse:collapse">
      <thead>
        <tr style="background:#f7faf9">
          <th style="text-align:right;padding:8px;border-bottom:1px solid #eee">#</th>
          <th style="text-align:right;padding:8px;border-bottom:1px solid #eee">ØªØ§Ø±ÛŒØ®</th>
          <th style="text-align:right;padding:8px;border-bottom:1px solid #eee">Ù†ÙˆØ¹</th>
          <th style="text-align:right;padding:8px;border-bottom:1px solid #eee">Ø´Ù†Ø§Ø³Ù‡</th>
          <th style="text-align:right;padding:8px;border-bottom:1px solid #eee">Ø¹Ù…Ù„</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #eee">payload (JSON)</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #eee">hash</th>
          <th style="text-align:left;padding:8px;border-bottom:1px solid #eee">prev_hash</th>
        </tr>
      </thead>
      <tbody>
        {% for e in rows %}
        <tr>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3">{{ e.id }}</td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3">{{ e.created_at }}</td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3">{{ e.object_type }}</td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3">{{ e.object_id or 'â€”' }}</td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3">{{ e.action }}</td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3"><pre style="white-space:pre-wrap;max-height:120px;overflow:auto">{{ e.payload }}</pre></td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3"><code style="font-size:11px">{{ e.hash }}</code></td>
          <td style="padding:8px;border-bottom:1px solid #f3f3f3"><code style="font-size:11px">{{ e.prev_hash or 'â€”' }}</code></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div style="margin-top:12px;text-align:center">
    {% if page > 1 %}
      <a class="btn" href="?page={{ page-1 }}">ØµÙØ­Ù‡Ù” Ù‚Ø¨Ù„ÛŒ</a>
    {% endif %}
    <span style="margin:0 12px">ØµÙØ­Ù‡ {{ page }} â€” Ú©Ù„ {{ total }}</span>
    {% if page * per_page < total %}
      <a class="btn" href="?page={{ page+1 }}">ØµÙØ­Ù‡Ù” Ø¨Ø¹Ø¯ÛŒ</a>
    {% endif %}
  </div>
</div>
{% endblock %}

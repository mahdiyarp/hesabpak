{% extends "base.html" %}
{% block content %}
<div class="module-wrap assistant-module">
  <div class="assistant-header">
    <div>
      <h2>๐ค ุฏุณุชุงุฑ ููุดููุฏ</h2>
      <p class="muted">ฺฏูุชโูฺฏู ุชุนุงูู ุจุฑุง ุฎูุงูุฏู ูุงฺฉุชูุฑูุง ฺฉุงุบุฐ ุง ุฏุฌุชุงูุ ุงุณุชุฎุฑุงุฌ ุงููุงู ู ุซุจุช ุฎูุฏฺฉุงุฑ ุฏุฑ ุณุณุชู.</p>
    </div>
    <div class="assistant-status {{ 'ready' if api_ready else 'missing' }}">
      {% if api_ready %}
      <span class="dot"></span> ูุนุงู โ ุงุชุตุงู ุจุฑูุฑุงุฑ ุงุณุช
      {% else %}
      <span class="dot"></span> ุบุฑูุนุงู โ ุงุจุชุฏุง ฺฉูุฏ API ุฑุง ุฏุฑ ุชูุธูุงุช ุซุจุช ฺฉูุฏ
      {% endif %}
    </div>
  </div>

  <div class="assistant-layout">
    <section class="assistant-chat card">
      <div id="assistant-messages" class="assistant-messages" data-empty-text="ูพุงู ุฎูุฏ ุฑุง ุจููุณุฏ ุง ุชุตูุฑ ูุงฺฉุชูุฑ ุฑุง ุขูพููุฏ ฺฉูุฏ."></div>
      <form id="assistant-form" class="assistant-form" autocomplete="off">
        <textarea id="assistant-input" class="assistant-input" rows="3" placeholder="ุณูุงู ุง ุชูุถุญ ุฎูุฏ ุฑุง ุจููุณุฏ..." {% if not api_ready %}disabled{% endif %}></textarea>
        <div class="assistant-actions">
          <label class="file-btn">
            ๐ ุขูพููุฏ ูุงฺฉุชูุฑ
            <input type="file" id="assistant-file" accept="image/*" {% if not api_ready %}disabled{% endif %}>
          </label>
          <button type="submit" class="btn-primary" {% if not api_ready %}disabled{% endif %}>ุงุฑุณุงู</button>
        </div>
        <div class="assistant-hints">
          <span>ุฑุงูููุง: ูโุชูุงูุฏ ุจฺฏูุฏ ยซุงู ูุงฺฉุชูุฑ ูุฑูุด ุฑุง ุซุจุช ฺฉูยป ุง ยซุงุฒ ููุฌูุฏ ุงุทููุงู ุฏุงุฑุยป</span>
        </div>
      </form>
    </section>

    <aside class="assistant-sidebar">
      <div id="assistant-preview" class="assistant-preview card" hidden>
        <h3>ูพุดโููุงุด ูุงฺฉุชูุฑ</h3>
        <div class="preview-meta">
          <div><span>ููุน:</span> <strong data-field="kind">โ</strong></div>
          <div><span>ูุดุชุฑ/ุชุฃููโฺฉููุฏู:</span> <strong data-field="partner">โ</strong></div>
          <div><span>ุชุงุฑุฎ:</span> <strong data-field="date">โ</strong></div>
          <div><span>ุดูุงุฑู:</span> <strong data-field="number">โ</strong></div>
        </div>
        <div class="preview-items">
          <table>
            <thead>
              <tr>
                <th>ฺฉุงูุง</th>
                <th>ุชุนุฏุงุฏ</th>
                <th>ููุช ูุงุญุฏ</th>
                <th>ุฌูุน</th>
                <th>ูุถุนุช</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="preview-total">ูุจูุบ ฺฉู: <strong data-field="total">ฐ</strong> ุชููุงู</div>
        <div id="assistant-missing" class="assistant-missing" hidden></div>
        <div id="assistant-error" class="assistant-error" hidden></div>
        <div class="preview-actions">
          <button type="button" id="assistant-confirm" class="btn-primary">ุชุฃุฏ ู ุซุจุช ุฏุฑ ุณุณุชู</button>
          <button type="button" id="assistant-cancel" class="btn-secondary">ุงูุตุฑุงู</button>
        </div>
      </div>

      <div class="assistant-tips card">
        <h3>ูฺฉุงุช ุงุณุชูุงุฏู</h3>
        <ul>
          <li>ุชุตุงูุฑ ูุงุถุญ ู ุฎูุงูุง ุจุง ุญุฏุงฺฉุซุฑ ุญุฌู ฒ ูฺฏุงุจุงุช ูุชุฌู ุจูุชุฑ ุฎูุงููุฏ ุฏุงุดุช.</li>
          <li>ุงฺฏุฑ ูุงู ูุดุชุฑ ุง ฺฉุงูุง ุฑุง ููโุดูุงุณูุ ุฏุณุชุงุฑ ุจุฑุง ุงุฌุงุฏ ุฑฺฉูุฑุฏ ุฌุฏุฏ ุงุฒ ุดูุง ุงุฌุงุฒู ูโฺฏุฑุฏ.</li>
          <li>ุชุงุฑุฎโูุง ุดูุณ ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุจู ููุงุฏ ุชุจุฏู ู ุฐุฎุฑู ูโุดููุฏ.</li>
        </ul>
      </div>
    </aside>
  </div>
</div>
{% endblock %}

{% block body_scripts %}
<script src="{{ prefix }}/static/assistant.js"></script>
{% endblock %}
